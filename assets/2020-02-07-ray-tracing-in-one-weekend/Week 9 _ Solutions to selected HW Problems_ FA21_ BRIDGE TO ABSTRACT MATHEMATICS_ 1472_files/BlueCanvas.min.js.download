var BLUE_CANVAS={eventAdded:!1,localConstant:{COURSE_DETAIL:"DASHBOARD_COURSES",IS_USER_LOGEDIN:"IS_USER_LOGEDIN",BLUE_SERIOUS_TASKS_POPUP:"BLUE_SERIOUS_TASKS_POPUP",FEEDBACK_ID:"FEEDBACK_ID",ADMIN_SETTING:"ADMIN_SETTING",ASSIGNMENT_LINK:"ASSIGNMENT_LINK",COURSE_IDS:"COURSE_IDS",USER_IN_COURSE:"USER_IN_COURSE",CURRENT_COURSE_ID:"CURRENT_COURSE_ID",BLUE_SERIOUS_TASKS_LOGINPOPUP:"BLUE_SERIOUS_TASKS_LOGINPOPUP",SERIOUS_TASKS_UNIQUE_COURSEIDS:"SERIOUS_TASKS_UNIQUE_COURSEIDS",LANGUAGE:ENV.BIGEASY_LOCALE.toLowerCase().replace("_","-"),DATE_FORMAT:{year:"numeric",month:"long",day:"numeric"}},AddEventToCalenderAgenda:function(){$.active>0?window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3):($(".agenda-event__item-container").unbind("click"),$(".agenda-event__item-container").click(function(){($(this).attr("aria-controls")==null||$(this).attr("aria-controls")==undefined)&&setTimeout(function(){$('[name*="blueFeedbackAssignmentLink"]').unbind("click");$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})},"500")}))},AddEventToCalendar:function(){$.active>0?window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3):(BLUE_CANVAS.eventAdded==!1&&$(".navigation_buttons:first button").length>0&&(BLUE_CANVAS.eventAdded=!0,$(".navigation_buttons:first button").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$(".context-list-toggle-box").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$("#week").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#month").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#agenda").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$(".fc-toolbar:first button").click(function(){$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})}),$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})),$(".fc-event").unbind("click"),$(".fc-event").click(function(){($(this).attr("aria-controls")==null||$(this).attr("aria-controls")==undefined)&&setTimeout(function(){$('[name*="blueFeedbackAssignmentLink"]').unbind("click");$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})},"500")}),$('[name*="blueFeedbackAssignmentLink"]').length>0&&($('[name*="blueFeedbackAssignmentLink"]').unbind("click"),$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})))},StoreCourseDetails:function(){for(var t=[],i=[],n=!0,r=BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/courses?enrollment_state=active&per_page=100";n;)n=!1,$.ajax({url:r,type:"GET",async:!1,success:function(u,f,e){if(u!=null&&u.length>0&&$.each(u,function(n,r){var u={id:r.id,originalName:r.name,href:"/courses/"+r.id};t.push(u);i.push(r.id)}),pages=e.getResponseHeader("link"),pages!=null&&pages.indexOf('rel="next"')!=-1){pageLinks=pages.split(",");for(var o=0;o<pageLinks.length;o++)if(pageLinks[o].indexOf('rel="next"')!=-1){r=pageLinks[o].substring(pageLinks[o].indexOf("<")+1,pageLinks[o].indexOf(">"));n=!0;break}}},error:function(){console.log("Error in getcourses")}});localStorage.setItem(BLUE_CANVAS.localConstant.COURSE_DETAIL,JSON.stringify(t));localStorage.setItem(BLUE_CANVAS.localConstant.COURSE_IDS,i.join())},GetCourseDetails:function(){return JSON.parse(localStorage.getItem(BLUE_CANVAS.localConstant.COURSE_DETAIL))},GetAdminsettingFromLocal:function(){return JSON.parse(localStorage.getItem(BLUE_CANVAS.localConstant.ADMIN_SETTING))},GetCourseIDs:function(){var n=localStorage.getItem(BLUE_CANVAS.localConstant.COURSE_IDS);return n==null?"":n},ClosePopup:function(n){$("#"+n).detach();$("body").css("position","inherit")},SetfocusOnPopup:function(){window.setTimeout("$('#bluePopupHeading').focus();",500)},FilterPendingTask:function(n,t,i){var r=[],u,f;return n!=null&&n.length>0&&(r=BLUE_CANVAS.FilterBlockableTask(n,BLUE_CANVAS.localConstant.LANGUAGE,t,i),(r==null||r.length==0)&&(u=$.map(n,function(n){if(n.Language.match("^"+BLUE_CANVAS.localConstant.LANGUAGE.substring(0,2)))return n.Language.toLowerCase()}),u!=null&&u.length>0&&(r=BLUE_CANVAS.FilterBlockableTask(n,u[0],t,i))),r!=null&&r.length==0&&(r=BLUE_CANVAS.FilterBlockableTask(n,BLUE_CANVAS_SETUP.defaultLanguage,t,i)),r!=null&&r.length==0&&(f=n[0].Language.toLowerCase(),r=BLUE_CANVAS.FilterBlockableTask(n,f,t,i))),r},FilterBlockableTask:function(n,t,i,r){var f=BLUE_CANVAS.GetAdminsettingFromLocal(),u;return i?(u=new Date,u.setMinutes(u.getMinutes()-u.getTimezoneOffset()),$.grep(n,function(n){return n.StartDate<=u.toJSON()&&n.DueDate>=u.toJSON()&&n.Language.toLowerCase()==t&&$.inArray(n.TaskType,f.LoginTaskType)!==-1&&(r||n.CourseID!=""&&n.CourseID!="0")})):$.grep(n,function(n){return(n.Blockable=="true"||n.Blockable==!0)&&n.StartDate<=f.StartDate&&n.DueDate>=f.DueDate&&n.Language.toLowerCase()==t&&$.inArray(n.TaskType,f.BlockingTaskType)!==-1})},CommonPopUp:function(n,t,i,r,u){var f="";return f+="<style>label {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",f+="input[type=checkbox].css-checkbox {position: absolute; opacity:0;}",f+="input[type=checkbox].css-checkbox + label.css-label {padding-left:25px;height:18px; display:inline-block;line-height:18px;background-repeat:no-repeat;background-position: 0 0;cursor:pointer;}",f+="input[type=checkbox].css-checkbox:checked + label.css-label {background-position: 0 -18px;}",f+=".css-label{background-image:url("+BLUE_CANVAS_SETUP.connectorUrl+"/Content/check.png);}",f+="input[type=checkbox].css-checkbox:focus + label.css-label {border: 1px dotted black;}",f+=".lite-green-check{background-image:url("+BLUE_CANVAS_SETUP.connectorUrl+"/Content/check.png);}",f+='div[id^="dvInner_"]{left:auto !important; margin:auto;}',f+='@media only screen and (max-width:700px){div[id^="dvInner_"]{top: 10% !important;}} @media only screen and (max-width:600px){div[id^="dvInner_"]{width:340px !important;margin-left:10px;} }<\/style>',(t==null||t=="")&&(t=BLUE_CANVAS_SETUP.connectorUrl+"/Content/explorance-university.png"),f+='<div id="dvOuter" style="position: fixed; top: 0; left: 0; background: rgba(0,0,0,0.6); z-index: 1000; width: 100%; height: 100%;" role="dialog">',f+="<div id="+n+' style="position: relative; top: 25%; left: 30%; height: auto; width:auto; max-width: 450px; z-index: 10; background: #fff; border-top: 3px solid rgb(66, 139, 202); box-shadow: 0px 2px 6px rgba(0,0,0,1);" role="document" aria-live="assertive">',f+='<div style="padding: 0.5%; padding-bottom: 4%;">',f+='<div style="text-align: center; box-shadow: lightGray 0px 1px; "><img style="height:75px" alt="Institution Logo Image" src='+t+" /><\/div>",f+='<h4 id="bluePopupHeading" style="padding: 10px;color: #474644;font-size:13px; box-shadow: lightGray 0px 1px; text-align: center;" tabindex="0"><strong>'+i+"<\/strong><\/h4>",f+='<div style="padding-left:10px;padding-right:10px;max-height: 150px;overflow-y: auto; overflow-x: hidden;">',f+=u,f+="<\/div>",f+="<\/div>",f+='<div style="padding: 10px; background-color: #f1e5e5; text-align: center">',f+=r,f+="<\/div>",f+="<\/div>",f+"<\/div>"},ShowLoader:function(){var n="";n+="<style> ";n+="#dvCanvasLoader {position: fixed;    top: 0;\tleft: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.5);z-index:999999;} ";n+=".loaderMsg {width: 300px;\tposition: relative;overflow: hidden;left: 40%;top: 40%;text-align: center;font-size: 14px;color: #fff;font-family: Verdana, Geneva, sans-serif;} ";n+="@media screen and (-webkit-min-device-pixel-ratio:0){  .spinner div { width: 20px;height: 20px;position: absolute;left: -20px;top: 310px !important;background-color: #fff;border-radius: 50%;animation: move 4s infinite cubic-bezier(.2, .64, .81, .23);z-index: 9999; }} ";n+=".spinner div{width: 20px;\theight: 20px;position: absolute;left: -20px;top: 280px;background-color: #fff;border-radius: 50%;animation: move 4s infinite cubic-bezier(.2, .64, .81, .23);z-index: 9999;}";n+=".spinner div:nth-child(2){animation-delay: 100ms;}";n+=".spinner div:nth-child(3){animation-delay: 200ms;}";n+=".spinner div:nth-child(4){animation-delay: 300ms;}";n+="@keyframes move { 0% {left: 0%;} 75% {left:100%;} 100% {left:100%;}}";n+="<\/style>";n+='<div id="dvCanvasLoader"><div class="loaderMsg">Checking for incomplete evaluations<\/div>';n+='<div class="spinner"><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';n+="<\/div>";$("body").append(n)},HideLoader:function(){$("#dvCanvasLoader").detach()},GetBlueAdminSetting:function(){$.ajax({url:BLUE_CANVAS_SETUP.connectorUrl+"/api/Canvas/GetAdminSetting?language="+BLUE_CANVAS.localConstant.LANGUAGE,type:"GET",headers:{CONSUMERID:BLUE_CANVAS_SETUP.consumerID},async:!0,success:function(n){if(n!=null){localStorage.setItem(BLUE_CANVAS.localConstant.ADMIN_SETTING,JSON.stringify(n));var t=BLUE_CANVAS.GetAdminsettingFromLocal();if(t!=null&&BLUE_CANVAS.ShowLoginPopUp(),t!=null&&t.BlockingPrompt!=null&&t.BlockingPrompt.BlockingOption!="NONE")$("#right-side-wrapper").on("click","a[href='/grades']",function(){var n=localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP);n!=undefined&&n!=null&&n!=""&&(this.href="javascript:void(0)",this.onclick=function(){$("body").append(n);BLUE_CANVAS.SetfocusOnPopup()},$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())})}},error:function(){console.log("Error in GetBlueAdminSetting function")}})},ShowLoginPopUp:function(){var n,t=!1,i=BLUE_CANVAS.GetAdminsettingFromLocal();i.DisabledCustomData?(n=BLUE_CANVAS_SETUP.connectorUrl+"/api/Canvas/GetTaskDetails?studentId="+ENV.current_user_id+"&courseIds="+BLUE_CANVAS.GetCourseIDs()+"&language="+BLUE_CANVAS.localConstant.LANGUAGE+"&isLoginPopup=true",$.ajax({url:BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS_SETUP.domainName,type:"GET",success:function(n){n!=null&&n.data.NoPopUpAgain!=null&&n.data.NoPopUpAgain!=undefined&&(t=n.data.NoPopUpAgain)},error:function(){}})):n=BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS_SETUP.domainName;$.ajax({url:n,type:"GET",headers:{CONSUMERID:BLUE_CANVAS_SETUP.consumerID},success:function(n){if(n!=null&&n!=undefined){var r=[];i.DisabledCustomData?n.Tasks!=null&&(r=n.Tasks):n.data!=null&&(t=n.data.NoPopUpAgain,n.data.BlueTaskData!=null&&n.data.BlueTaskData.TaskList!=null&&(r=n.data.BlueTaskData.TaskList));BLUE_CANVAS.ShowPendingTaskPopUp(r,t)}},error:function(){},complete:function(){}})},ShowPendingTaskPopUp:function(n,t){var o=[],i=BLUE_CANVAS.GetAdminsettingFromLocal(),s,e,f,r,l,a;if(i!=null&&n!=null&&n.length>0&&(s=BLUE_CANVAS.GetCourseIDs(),s!=null&&s!=""&&(s=s.split(","),tempList=n,tempList!=null&&tempList.length>0&&(o=i.DisabledCustomData?tempList:BLUE_CANVAS.FilterPendingTask(tempList,!0,i.UserLevelTasks),o!=null&&o.length>0)))){var u={Ids:[],PopUpList:[]},h=!1,c=!1;if($.each(o,function(n,t){if($.inArray(t.CourseID,u.Ids)==-1){u.Ids.push(t.CourseID);var r={CourseId:t.CourseID,Course:$.grep(BLUE_CANVAS.GetCourseDetails(),function(n){return n.id==t.CourseID}),DueDates:$.map(o,function(n){if(n.CourseID==t.CourseID)return new Date(n.DueDate)})},f=new Date(Math.min.apply(null,r.DueDates));r.Course.length>0?u.PopUpList.push({CourseName:r.Course[0].originalName,DueDate:f.toLocaleDateString(BLUE_CANVAS.localConstant.LANGUAGE,BLUE_CANVAS.localConstant.DATE_FORMAT),Link:r.Course[0].href,CourseID:r.Course[0].id}):!h&&i.UserLevelTasks&&(h=!0,u.PopUpList.push({CourseName:i.OtherCourseLabel,DueDate:f.toLocaleDateString(BLUE_CANVAS.localConstant.LANGUAGE,BLUE_CANVAS.localConstant.DATE_FORMAT),Link:"",CourseID:"0"}));t.TaskType!="FO"&&(c=!0)}}),u.PopUpList.length>0){for(e="",e+='<table style="font-size:13px;width:100%" role="presentation">',f=0;f<u.PopUpList.length;f++)e+='<tr><td><a style="cursor:pointer;color:#1c70ed;text-decoration:underline;" href="#" title='+u.PopUpList[f].CourseName+' onclick="BLUE_CANVAS.PopUpCourseClick('+u.PopUpList[f].CourseID+');" >'+u.PopUpList[f].CourseName+'<\/a><\/td><td align="right" > '+i.DueLabel+" "+u.PopUpList[f].DueDate+"<\/td><\/tr>";e+="<\/table>";r="";r+='<div style="float:left;padding-top:10px;padding-left: 10px;">';i.LoginPrompt.CheckboxText!=""&&i.LoginPrompt.CheckboxText!=null&&(r+='<input  class="css-checkbox" type="checkbox" id="chkDoNotShow" />',r+='<label for="chkDoNotShow"  class="css-label lite-green-check">'+i.LoginPrompt.CheckboxText+"<\/label>");r+="<\/div>";r+='<div style="text-align:right;padding:10px;">';r+='<input type="button" value="'+i.LoginPrompt.ButtonText+'" title="'+i.LoginPrompt.ButtonText+'" class="btn btn-primary" style="white-space: normal;  margin-top: 10px;"  onclick="BLUE_CANVAS.BtnPendingPopUpClick(\'dvOuter\');"  id="btnPendingOk"  />';r+="<\/div>";l=BLUE_CANVAS.CommonPopUp("dvInner_SeriousTask",i.LogoUrl,c?i.LoginPrompt.QPSVMHeaderText:i.LoginPrompt.FOHeaderText,r,e);i.LoginPrompt.Enabled&&(t==undefined||t==null||t==""||t!=null&&t!=!0&&t!="true")&&($("body").append(l),BLUE_CANVAS.SetfocusOnPopup());r="";r+=i.BlockingPrompt.BlockingOption=="GB"?'<input type="button" tabindex="0" class="btn btn-primary" style="white-space: normal; margin-top: 10px;" onclick="BLUE_CANVAS.ClosePopup(\'dvOuter\');" value="'+i.BlockingPrompt.ButtonText+'" title="'+i.BlockingPrompt.ButtonText+'" id="btnDoLater" />':'<input type="button" tabindex="0" class="btn btn-primary" style="white-space: normal; margin-top: 10px;" onclick="BLUE_CANVAS.RedirectToDashBoard(\'dvOuter\');" value="'+i.BlockingPrompt.ButtonText+'" title="'+i.BlockingPrompt.ButtonText+'" id="btnDoLater" />';a=BLUE_CANVAS.CommonPopUp("dvInner_SeriousTask",i.LogoUrl,i.BlockingPrompt.HeaderText,r,e);localStorage.setItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP,a)}}},BtnPendingPopUpClick:function(n){$("#chkDoNotShow").is(":checked")&&BLUE_CANVAS.DisablePopup();BLUE_CANVAS.ClosePopup(n)},DisablePopup:function(){var n={ns:BLUE_CANVAS_SETUP.domainName,data:!0};$.ajax({url:BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/custom_data/NoPopUpAgain",type:"PUT",data:n,dataType:"json",success:function(){}})},BlockCourse:function(n){var i=window.location.toString().toLowerCase().split("/"),t=BLUE_CANVAS.GetAdminsettingFromLocal(),u,r;t!=null&&t.BlockingPrompt!=null&&t.BlockingPrompt.BlockingOption!="NONE"&&(localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==null||localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==""?localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==null||localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==""?(BLUE_CANVAS.ShowLoader(),localStorage.setItem(BLUE_CANVAS.localConstant.USER_IN_COURSE,!0),u=t.DisabledCustomData?BLUE_CANVAS_SETUP.connectorUrl+"/api/Canvas/GetTaskDetails?studentId="+ENV.current_user_id+"&courseIds="+BLUE_CANVAS.GetCourseIDs()+"&language="+BLUE_CANVAS.localConstant.LANGUAGE+"&isLoginPopup=false":BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS_SETUP.domainName,$.ajax({url:u,type:"GET",headers:{CONSUMERID:BLUE_CANVAS_SETUP.consumerID},success:function(r){var o,s,h,u,e,f,a,l,c;if(t.DisabledCustomData?o=r.Tasks:r!=null&&r.data!=null&&r.data.BlueTaskData!=null&&r.data.BlueTaskData.TaskList!=null&&r.data.BlueTaskData.TaskList.length>0&&(o=r.data.BlueTaskData.TaskList),o!=null&&o.length>0&&(s=[],$.each(o,function(n,t){$.inArray(t.CourseID,s)==-1&&s.push(t.CourseID)}),localStorage.setItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS,s),(i.length==6||i.length==7)&&i[5]=="grades"&&BLUE_CANVAS.GradeBlockDDLAction(s),h=$.grep(o,function(t){return t.CourseID==n}),h!=null&&h.length>0&&(u=t.DisabledCustomData?h:BLUE_CANVAS.FilterPendingTask(h,!1,!1),u!=null&&u.length>0))){for(e="",e+='<table style="font-size:13px;width:100%" role="presentation">',f=0;f<u.length;f++)a=u[f].Name.length>38?u[f].Name.substring(0,35)+"...":u[f].Name,e+='<tr><td><a style="cursor:pointer;color:#1c70ed;text-decoration:underline;" title="'+u[f].Name+'" ',e+=t.LaunchNewTab?t.BlockingPrompt.BlockingOption=="GB"?'href="'+u[f].Link+'" target="_blank" onclick="BLUE_CANVAS.ClosePopup(\'dvOuter\');">':'href="'+u[f].Link+'" target="_blank" onclick="BLUE_CANVAS.RedirectToDashBoard(\'dvOuter\');">':"href=\"javascript:void(0);\" onclick=\"BLUE_CANVAS.ClosePopup('dvOuter');BLUE_CANVAS.NavigateToTask('"+u[f].Link+"');\">",e+=a+'<\/a><\/td><td align="right" > '+t.DueLabel+" "+new Date(u[f].DueDate).toLocaleDateString(BLUE_CANVAS.localConstant.LANGUAGE,BLUE_CANVAS.localConstant.DATE_FORMAT)+"<\/td><\/tr>";e+="<\/table>";l="";l+=t.BlockingPrompt.BlockingOption=="GB"?'<input type="button" class="btn btn-primary" style="white-space: normal; margin-top: 10px;" onclick="BLUE_CANVAS.ClosePopup(\'dvOuter\');" value="'+t.BlockingPrompt.ButtonText+'" title="'+t.BlockingPrompt.ButtonText+'" id="btnDoLater" />':'<input type="button" class="btn btn-primary" style="white-space: normal; margin-top: 10px;" onclick="BLUE_CANVAS.RedirectToDashBoard(\'dvOuter\');" value="'+t.BlockingPrompt.ButtonText+'" title="'+t.BlockingPrompt.ButtonText+'" id="btnDoLater" />';c="";c=BLUE_CANVAS.CommonPopUp("dvInner_CoursePending",t.LogoUrl,t.BlockingPrompt.HeaderText,l,e);localStorage.setItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP,c);BLUE_CANVAS.ShowBlocking(c,t,n)}BLUE_CANVAS.HideLoader()},error:function(){BLUE_CANVAS.HideLoader()},complete:function(){BLUE_CANVAS.HideLoader()}})):(i.length==6||i.length==7)&&i[5]=="grades"&&(r=localStorage.getItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS),r!=null&&(r=r.split(","),BLUE_CANVAS.GradeBlockDDLAction(r))):(BLUE_CANVAS.ShowBlocking(localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),t,n),BLUE_CANVAS.HideLoader()))},ShowBlocking:function(n,t,i){if(t.BlockingPrompt.BlockingOption=="GB"){var r=window.location.toString().toLowerCase().split("/");(r.length==6||r.length==7)&&r[5]=="grades"&&($("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup());$(".section a")!=null&&$(".section a").length!=0?$(".section a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&i[0].pathname.match("grades$")&&(t.preventDefault(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())}):$("#left-side a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&i[0].pathname.match("grades$")&&(t.preventDefault(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())})}else $(".section a")!=null&&$(".section a").length!=0?$(".section a").click(function(i){var r=$(this);r!=null&&r[0].pathname!=null&&r[0].pathname!=""&&r[0].pathname.match("^/courses")&&!r[0].text.match(t.ToolName+"$")&&(i.preventDefault(),$("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())}):$("#left-side a").click(function(i){var r=$(this);r!=null&&r[0].pathname!=null&&r[0].pathname!=""&&r[0].pathname.match("^/courses")&&!r[0].text.match(t.ToolName+"$")&&(i.preventDefault(),$("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())}),BLUE_CANVAS.GetExternalToolId(i),window.location.href!=BLUE_CANVAS_SETUP.canvasAPI+"/courses/"+i+"/external_tools/"+localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)&&($("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())},RedirectToDashBoard:function(){window.location.href=BLUE_CANVAS_SETUP.canvasAPI},PopUpCourseClick:function(n){var i=BLUE_CANVAS.GetAdminsettingFromLocal(),t;BLUE_CANVAS.GetExternalToolId(n);t=localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID);window.location.href=t!=null&&t!=""&&t!="0"?n==0?BLUE_CANVAS_SETUP.canvasAPI+"/users/"+ENV.current_user_id+"/external_tools/"+localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID):BLUE_CANVAS_SETUP.canvasAPI+"/courses/"+n+"/external_tools/"+localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID):BLUE_CANVAS_SETUP.canvasAPI+"/users/"+ENV.current_user_id+"/external_tools/"+i.ToolId},GetExternalToolId:function(n){var t,r;(localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)==null||localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)=="")&&(t="",t=n!=null&&n!=0?BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/courses/"+n+"/tabs":BLUE_CANVAS_SETUP.canvasAPI+"/api/v1/users/self/tabs",r=BLUE_CANVAS.GetAdminsettingFromLocal(),$.ajax({url:t,type:"GET",async:!1,success:function(n){if(n!=null)for(i=1;i<n.length;i++)if(n[i].label==r.ToolName){var t=n[i].full_url.split("/");localStorage.setItem(BLUE_CANVAS.localConstant.FEEDBACK_ID,t[6])}}}))},NavigateToTask:function(n){var i=BLUE_CANVAS.GetAdminsettingFromLocal(),r='<iframe allowfullscreen="true" style="min-height: 650px;" class="tool_launch" id="tool_content" mozallowfullscreen="true" name="tool_content" src="'+n+'" tabindex="0" title="Tool Content" webkitallowfullscreen="true"><\/iframe>',t;jQuery("#content").html(r);$("#content").show();jQuery("#right-side-wrapper").hide();jQuery("#left-side li.section a.active").removeClass("active");t=jQuery('#left-side li.section a[class*="context_external_tool"]:contains("'+i.ToolName+'")').filter(function(){return $(this).text().trim().toLowerCase()==i.ToolName.toLowerCase()});t!=null&&t.length>0&&t.addClass("active")},ResetStudentCustomData:function(){$("#btnResetLoginPopUp").prop("disabled",!0);var n=window.location.toString().toLowerCase().split("/"),t=n[n.length-1];$.ajax({url:BLUE_CANVAS_SETUP.connectorUrl+"/api/Canvas/ResetStudentsSettings?adminUserID="+ENV.current_user_id+"&accountID="+t+"&domainName="+BLUE_CANVAS_SETUP.domainName,type:"GET",headers:{CONSUMERID:BLUE_CANVAS_SETUP.consumerID},success:function(){}})},GradeBlockDDLAction:function(n){$("#course_url option").each(function(){var i=$(this).val(),t=i.split("/");t[2]!=null&&t[2]!=""&&$.inArray(t[2],n)!=-1&&$(this).remove()})},ClearLocalStorage:function(){localStorage.removeItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN);localStorage.removeItem(BLUE_CANVAS.localConstant.COURSE_DETAIL);localStorage.removeItem(BLUE_CANVAS.localConstant.FEEDBACK_ID);localStorage.removeItem(BLUE_CANVAS.localConstant.ADMIN_SETTING);localStorage.removeItem(BLUE_CANVAS.localConstant.COURSE_IDS);localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP);localStorage.removeItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID);localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP);localStorage.removeItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS)},AddLogoutEvent:function(){var n=$("form[action$='logout']>button[type='submit']");n!=null&&n.length>0&&n.each(function(){$(this).click(function(){BLUE_CANVAS.ClearLocalStorage()})})},AddToDoEvents:function(){$(".planner-item button").not(".bclinks").length>0&&$(".planner-item button").not(".bclinks").each(function(){$(this).addClass("bclinks");$(this).unbind("click");$(this).click(function(){setTimeout(function(){$('[name*="blueFeedbackAssignmentLink"]').unbind("click");$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})},"500")})})}};$(function(){var n=window.location.toString().toLowerCase().split("/"),t;if((document.referrer.indexOf("login")>0||document.referrer.indexOf(window.location.hostname)==-1)&&document.referrer!=""&&document.referrer.indexOf("login_success")==-1&&BLUE_CANVAS.ClearLocalStorage(),ENV.current_user_id==null&&window.location.toString().toLowerCase().indexOf("login")!=-1?BLUE_CANVAS.ClearLocalStorage():n.length==4&&(n[3]==""||n[3]=="#"||n[3].indexOf("login_success")!=-1)&&BLUE_CANVAS.StoreCourseDetails(),ENV.current_user_roles!=null&&ENV.current_user_roles.length>0){if(n.length==4&&(n[3]==""||n[3]=="#"||n[3].indexOf("login_success")>0)){if((localStorage.getItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN)==null||localStorage.getItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN)==undefined)&&(BLUE_CANVAS.GetBlueAdminSetting(BLUE_CANVAS_SETUP.domainName),localStorage.setItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN,!0)),t=BLUE_CANVAS.GetAdminsettingFromLocal(),t!=null&&t.BlockingPrompt!=null&&t.BlockingPrompt.BlockingOption!="NONE")$("#right-side-wrapper").on("click","a[href='/grades']",function(){var n=localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP);n!=undefined&&n!=null&&n!=""&&(this.href="javascript:void(0)",this.onclick=function(){$("body").append(n);BLUE_CANVAS.SetfocusOnPopup()},$("body").append(n),BLUE_CANVAS.SetfocusOnPopup())});window.setTimeout("BLUE_CANVAS.AddToDoEvents();",1e3);$(window).scroll(function(){window.setTimeout("BLUE_CANVAS.AddToDoEvents();",100)})}n.length>4&&n[3]=="courses"?(localStorage.getItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID)!=n[4]&&(localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),localStorage.removeItem(BLUE_CANVAS.localConstant.USER_IN_COURSE),localStorage.removeItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS),localStorage.setItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID,n[4])),(localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)==null||localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)=="")&&BLUE_CANVAS.BlockCourse(n[4])):(localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),localStorage.removeItem(BLUE_CANVAS.localConstant.USER_IN_COURSE),localStorage.removeItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID));$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])});n.length>3&&n[3].indexOf("calendar")!=-1&&(window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3),window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3),$(".navigation_buttons:first button").length>0&&(BLUE_CANVAS.eventAdded=!0,$(".navigation_buttons:first button").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$(".context-list-toggle-box").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$("#week").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#month").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#agenda").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$(".fc-toolbar:first button").click(function(){$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})}),$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})));$('[name*="blueFeedbackAnnouncementLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})}$("#global_nav_profile_link").click(function(){window.setTimeout("BLUE_CANVAS.AddLogoutEvent();",500)})});